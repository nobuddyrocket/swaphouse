<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwapHouse</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Home Screen -->
  <div id="home-screen" class="screen active">
    <div class="container">
      <h1 class="title">SWAPHOUSE</h1>
      <p class="subtitle">Split Control. Shared Chaos.</p>

      <div class="input-group">
        <input type="text" id="player-name" placeholder="Your Name" maxlength="12">
      </div>

      <div id="player-count-select" class="hidden">
        <p class="select-label">Select Total Players:</p>
        <div class="player-count-buttons">
          <button class="count-btn" data-count="1">1 (Solo + CPU)</button>
          <button class="count-btn" data-count="2">2</button>
          <button class="count-btn" data-count="3">3</button>
          <button class="count-btn" data-count="4">4</button>
          <button class="count-btn" data-count="5">5</button>
        </div>
        <button id="confirm-create-btn" class="btn btn-primary">Create Room</button>
        <button id="cancel-create-btn" class="btn btn-secondary">Cancel</button>
      </div>

      <div id="main-buttons" class="button-group">
        <button id="create-room-btn" class="btn btn-primary">Create Room</button>
        <button id="join-room-btn" class="btn btn-secondary">Join Room</button>
      </div>

      <div id="join-form" class="hidden">
        <div class="input-group">
          <input type="text" id="room-code" placeholder="Room Code" maxlength="6">
        </div>
        <button id="confirm-join-btn" class="btn btn-primary">Join</button>
      </div>

      <p id="error-message" class="error hidden"></p>
    </div>
  </div>

  <!-- Lobby Screen -->
  <div id="lobby-screen" class="screen">
    <div class="container">
      <h2>Room: <span id="room-code-display"></span></h2>

      <div id="player-list" class="player-list">
        <!-- Players will be added here -->
      </div>

      <div class="button-group">
        <button id="ready-btn" class="btn btn-secondary">Ready</button>
        <button id="start-btn" class="btn btn-primary hidden">Start Game</button>
      </div>

      <p id="lobby-message" class="message"></p>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="screen">
    <canvas id="game-canvas"></canvas>

    <!-- HUD -->
    <div id="hud">
      <div id="hud-top-left">
        <div id="role-display">You control: <span id="role-name">---</span></div>
        <div id="swap-timer">Swap in: <span id="swap-countdown">01:30</span></div>
      </div>

      <div id="hud-top-center">
        <div id="timer-display">05:59</div>
      </div>

      <div id="hud-bottom-left">
        <div id="inventory">
          <div class="inv-slot" id="inv-slot-0"></div>
          <div class="inv-slot" id="inv-slot-1"></div>
        </div>
      </div>

      <div id="hud-bottom-right">
        <div id="exit-checklist">
          <div class="check-item" id="check-battery"><span class="check-icon">✗</span> Battery</div>
          <div class="check-item" id="check-bulb"><span class="check-icon">✗</span> Bulb</div>
          <div class="check-item" id="check-handle"><span class="check-icon">✗</span> Handle</div>
        </div>
      </div>
    </div>

    <!-- Role Swap Overlay -->
    <div id="role-swap-overlay" class="overlay hidden">
      <div class="overlay-content">
        <h2>CONTROL SWAP!</h2>
        <p>You now control: <span id="new-role-name">---</span></p>
      </div>
    </div>

    <!-- NPC Caught Overlay -->
    <div id="npc-overlay" class="overlay hidden">
      <div class="overlay-content">
        <h2>THE COLLECTOR STOPPED YOU!</h2>
        <p id="npc-demand">GIVE ME THE BULB</p>
        <div id="vote-buttons">
          <button id="vote-give" class="btn btn-primary">GIVE</button>
          <button id="vote-refuse" class="btn btn-danger">REFUSE</button>
        </div>
        <div id="vote-status">
          <p>Votes: <span id="vote-give-count">0</span> Give / <span id="vote-refuse-count">0</span> Refuse</p>
          <p>Time left: <span id="vote-timer">5</span>s</p>
        </div>
      </div>
    </div>

    <!-- Results Overlay -->
    <div id="results-overlay" class="overlay hidden">
      <div class="overlay-content">
        <h2 id="result-title">WIN!</h2>
        <div id="result-stats">
          <p>Time: <span id="stat-time">--:--</span></p>
          <p>Times Caught: <span id="stat-caught">0</span></p>
          <p>Items Sacrificed: <span id="stat-sacrificed">0</span></p>
        </div>
        <div class="button-group">
          <button id="play-again-btn" class="btn btn-primary hidden">Play Again</button>
          <button id="lobby-btn" class="btn btn-secondary">Return to Lobby</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="/shared/constants.js"></script>
  <script src="/js/socket.js"></script>
  <script src="/js/input.js"></script>
  <script src="/js/renderer.js"></script>
  <script src="/js/ui.js"></script>
  <script src="/js/screens/home.js"></script>
  <script src="/js/screens/lobby.js"></script>
  <script src="/js/screens/game.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>
